---
import BaseLayout from "../layouts/BaseLayout.astro";
import hnClientUrl from "../scripts/hn-client.ts?url";

const title = "Modern HN Reader";
const description = "A modern Hacker News reader: top/new/best feeds, caching, and a lightweight reader view.";
---

<BaseLayout title={title} description={description}>
  <header class="relative overflow-hidden border-b border-white/10">
    <div aria-hidden="true" class="pointer-events-none absolute inset-0">
      <div class="absolute -top-44 left-1/2 h-[520px] w-[920px] -translate-x-1/2 rounded-full bg-blue-600/20 blur-[120px]"></div>
      <div class="absolute -bottom-72 left-1/2 h-[520px] w-[920px] -translate-x-1/2 rounded-full bg-cyan-500/10 blur-[140px]"></div>
      <div class="absolute inset-0 opacity-[0.25] bg-grid"></div>
    </div>

    <nav class="relative mx-auto flex max-w-6xl items-center justify-between px-6 py-6">
      <a href="/" class="group inline-flex items-center gap-2">
        <span class="grid h-9 w-9 place-items-center rounded-xl bg-blue-600/20 ring-1 ring-blue-400/25">
          <span class="h-2.5 w-2.5 rounded-full bg-blue-400 shadow-[0_0_25px_rgba(96,165,250,0.8)]"></span>
        </span>
        <span class="text-sm font-semibold tracking-wide text-neutral-100">
          XPMT<span class="text-blue-300">Â·</span>HN Reader
        </span>
      </a>

      <div class="flex items-center gap-2">
        <a
          href="https://news.ycombinator.com/"
          target="_blank"
          rel="noreferrer"
          class="hidden rounded-full px-4 py-2 text-sm text-neutral-300 ring-1 ring-white/10 hover:bg-white/5 hover:text-neutral-100 sm:inline-flex"
        >
          Open HN
        </a>
        <a
          href="/"
          class="inline-flex items-center justify-center rounded-full bg-blue-500 px-4 py-2 text-sm font-semibold text-neutral-950 shadow-[0_0_0_1px_rgba(255,255,255,0.08),0_10px_40px_rgba(59,130,246,0.25)] hover:bg-blue-400"
        >
          Back to landing
        </a>
      </div>
    </nav>

    <div class="relative mx-auto max-w-6xl px-6 pb-10">
      <div class="flex flex-col gap-3 sm:flex-row sm:items-end sm:justify-between">
        <div>
          <h1 class="text-balance text-2xl font-semibold tracking-tight text-neutral-50 sm:text-3xl">Modern HN Reader</h1>
          <p class="mt-2 max-w-2xl text-sm text-neutral-300">
            Official Firebase API, fast caching, and a clean dark/blue UI. Click a story to open a reader view.
          </p>
        </div>

        <div class="inline-flex items-center gap-2 rounded-2xl bg-white/5 p-1 ring-1 ring-white/10" role="tablist" aria-label="HN feeds">
          <button data-feed="top" class="feed-tab rounded-xl px-3 py-2 text-sm text-neutral-200 hover:bg-white/5" role="tab">Top</button>
          <button data-feed="new" class="feed-tab rounded-xl px-3 py-2 text-sm text-neutral-200 hover:bg-white/5" role="tab">New</button>
          <button data-feed="best" class="feed-tab rounded-xl px-3 py-2 text-sm text-neutral-200 hover:bg-white/5" role="tab">Best</button>
        </div>
      </div>
    </div>
  </header>

  <main id="main" class="mx-auto grid max-w-6xl gap-6 px-6 py-8 lg:grid-cols-12">
    <section class="lg:col-span-7">
      <div class="rounded-2xl bg-white/5 ring-1 ring-white/10">
        <div class="flex items-center justify-between border-b border-white/10 px-5 py-4">
          <h2 class="text-sm font-semibold text-neutral-100">Stories</h2>
          <div class="flex items-center gap-2">
            <button id="refresh" class="rounded-lg bg-white/5 px-3 py-1.5 text-xs font-semibold text-neutral-200 ring-1 ring-white/10 hover:bg-white/10">
              Refresh
            </button>
          </div>
        </div>

        <div id="list" class="divide-y divide-white/10"></div>

        <div id="list-footer" class="px-5 py-4 text-xs text-neutral-400"></div>
      </div>
    </section>

    <aside class="lg:col-span-5">
      <div class="rounded-2xl bg-neutral-950/60 ring-1 ring-white/10">
        <div class="border-b border-white/10 px-5 py-4">
          <h2 class="text-sm font-semibold text-neutral-100">Reader</h2>
          <p class="mt-1 text-xs text-neutral-400">Lightweight view + summary placeholder (MVP).</p>
        </div>

        <div id="reader" class="p-5"></div>
      </div>
    </aside>
  </main>



  <script type="module" src={hnClientUrl}></script>
</BaseLayout>
